app-id: org.sqlitebrowser.sqlitebrowser
runtime: org.kde.Platform
runtime-version: '5.15-21.08'
sdk: org.kde.Sdk
command: sqlitebrowser
rename-icon: sqlitebrowser
rename-desktop-file: sqlitebrowser.desktop
rename-appdata-file: sqlitebrowser.desktop.appdata.xml
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  - --filesystem=home
  - --share=network
  - --share=ipc
cleanup:
  - /include
  - "*.la"

modules:
  - tcl.json
  - name: sqlcipher
    buildsystem: autotools
    config-opts:
      - --enable-threadsafe
      - --enable-cross-thread-connections
      - --enable-releasemode
      - --disable-static
      - --with-crypto-lib
      - --enable-tempstore=yes
    sources:
      - type: git
        url: https://github.com/sqlcipher/sqlcipher.git
        tag: v4.5.2
        commit: 104f2d2fda33f4c179960d628e7446f3869ef4ed
        x-checker-data:
          type: git
          tag-pattern: ^v([\d.]+)$

  - name: sqlitebrowser
    buildsystem: cmake-ninja
    config-opts:
      - -DFORCE_INTERNAL_QSCINTILLA=TRUE
      - -Wno-dev
    sources:
      - type: git
        url: https://github.com/sqlitebrowser/sqlitebrowser.git
        tag: v3.12.2
        commit: 1955cb13b483fa66849bce152f302fe6817bfadc
        x-checker-data:
          type: git
          tag-pattern: ^v([\d.]+)$
      - type: patch
        path: appdata.patch
      - type: patch
        path: appdata-update.patch
